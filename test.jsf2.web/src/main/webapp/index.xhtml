<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<f:view>
	<h:head>
		<title>JSF</title>
		<h:outputStylesheet library="css" name="styles.css" />
	</h:head>
	<h:body>
		<h:form id="formulaire">
			<p:tabView effect="fade" effectDuration="normal" id="tabs">

				<p:tab title="Ajout Mouvement" id="ajoutMouvementTab">

					<p:panelGrid columns="2">

						<h:outputLabel value="Compte: " />
						<p:selectOneMenu value="#{ajoutMouvement.selectedCompte}" effect="fade" label="Compte" required="true" converter="org.rcx.test.jsf2.web.converter.CompteConverter">
							<f:selectItem itemLabel="Selectionner" itemValue="" />
							<f:selectItems value="#{ajoutMouvement.comptes}" var="compte" itemLabel="#{compte.label}" itemValue="#{compte}" />
						</p:selectOneMenu>

						<h:outputLabel for="montant" value="Montant: *" />
						<p:inputText id="montant" value="#{ajoutMouvement.montant}" label="Montant" required="true" />

						<h:outputLabel value="Type opération :" />
						<h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
							<p:selectOneButton value="#{ajoutMouvement.typeOperation}" required="true" label="Type opération">
								<f:selectItem itemLabel="Débit" itemValue="Débit" />
								<f:selectItem itemLabel="Crédit" itemValue="Crédit" />
							</p:selectOneButton>
						</h:panelGrid>

						<h:outputLabel value="Date mouvement :" />
						<p:calendar value="#{ajoutMouvement.date}" id="popupCal" required="true" label="Date mouvement" />

						<f:facet name="footer">
							<p:commandButton value="Enregistrer" id="ajax" update="tabs" actionListener="#{ajoutMouvement.saveMouvement}" styleClass="ui-priority-primary" />
						</f:facet>
					</p:panelGrid>

					<p:dialog header="Selected Values" modal="true" showEffect="fade" hideEffect="fade" widgetVar="dlg">
						<h:panelGrid columns="1" id="display">
							<h:outputText value="Compte : #{ajoutMouvement.selectedCompte}" />
							<h:outputText value="Montant : #{ajoutMouvement.montant}" />
							<h:outputText value="Opération : #{ajoutMouvement.typeOperation}" />
							<h:outputText value="Date mouvement : #{ajoutMouvement.date}" />
						</h:panelGrid>
					</p:dialog>
				</p:tab>

				<p:tab title="Historique">

					<p:ring id="ringBasic" value="#{historique.comptes}" var="compte">
						<p:outputPanel style="text-align:center;" layout="block">  
            				#{compte.label}  <br />
							<p:commandButton update="ringBasic" icon="ui-icon-search" title="View" oncomplete="PF('dlg').show()">
								<f:setPropertyActionListener value="#{compte}" target="#{historique.selectedCompte}" />
							</p:commandButton>
						</p:outputPanel>
					</p:ring>

				</p:tab>

				<p:tab title="Recherche">

					<h:panelGrid columns="4" cellpadding="5">
						<p:inputText id="searchBox" value="#{search.searchValue}" />

						<p:commandButton value="Recherche" actionListener="#{search.onSearch}" update="tagCloud" styleClass="ui-priority-primary" />

						<h:outputText value="#{search.searchValue}" id="searchValueDisplay" />
					</h:panelGrid>

					<p:growl id="growl" showDetail="true" sticky="true" />

					<p:tagCloud model="#{search.tagCloudBean.model}" id="tagCloud">
						<p:ajax event="select" update="tagCloud,searchValueDisplay,searchBox" listener="#{search.onSelectTag}" />
					</p:tagCloud>

				</p:tab>

			</p:tabView>
		</h:form>
	</h:body>
</f:view>
</html>
